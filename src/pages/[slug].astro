---
import Layout from '@/layouts/Layout.astro'
import { getAllExceptHomePage, processTable } from '@/lib/api'
import { formatDate } from '@/lib/dateTime'

export async function getStaticPaths() {
	const pages = await getAllExceptHomePage()
	return pages.map(page => ({
		params: { slug: page.slug },
		props: { page, modified: formatDate(page.modified) },
	}))
}

const { page, modified } = Astro.props
const content = processTable(page.content)
---

<Layout slug={page.slug} title={page.title} footer>
	<div class="content-wrapper">
		<h1 class="content-title">
			{page.title}
		</h1>
		<div class="content-update">
			aktualisiert am {modified}
		</div>

		<div id="content" class="pt-9 pb-6 lg:pt-10" set:html={content} />
	</div>
</Layout>
